<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>채용공고관리 – 대기</title>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>
  <link rel="stylesheet" href="채용공고관리.css"/>
</head>
<body>
  <div class="wrapper">
    <header>
    <a href="../6메인/Ywork.html" class="back-btn">
        <span class="material-icons">arrow_back</span>
    </a>
      <h1>공고관리  </h1>
    </header>

  <nav class="tabs">
    <a href="채용공고관리등록.html" class="tab"> 
      등록(<span class="count">–</span>)
    </a>
    <a href="채용공고관리대기.html"  class="tab active">
      대기(<span class="count">–</span>)
    </a>
    <a href="채용공고관리마감.html" class="tab">
      마감(<span class="count">–</span>)
    </a>
  </nav>

    <div class="search-container">
      <input type="text" class="search-input" placeholder="공고제목, 기업명, 업직종 검색"/>
      <button class="search-btn"><span class="material-icons">search</span></button>
    </div>

    <div class="filter-bar">
      <span class="total"></span>
      <button class="sort-btn">
        <span class="material-icons">unfold_more</span>작성일순
      </button>
    </div>

    <section class="content">
      <div class="card">
        <div class="card-content">
          <div class="item-row"><strong>공고명</strong><p>OO카페 바리스타</p></div>
          <div class="item-row"><strong>장소</strong><p>서울시 강남구</p></div>
          <div class="item-row"><strong>업직종</strong><p>카페, 바리스타</p></div>
          <div class="item-row"><strong>모집인원</strong><p>00명</p></div>
        </div>
        <div class="card-actions">
            <a href="/posts/123/edit"       class="action-btn">수정</a>
            <a href="/posts/123/draft"      class="action-btn">삭제</a>
        </div>
      </div>
      <div class="card">
        <div class="card-content">
          <div class="item-row"><strong>공고명</strong><p>OO편의점 매장관리</p></div>
          <div class="item-row"><strong>장소</strong><p>서울시 송파구</p></div>
          <div class="item-row"><strong>업직종</strong><p>편의점, 매장관리</p></div>
          <div class="item-row"><strong>모집인원</strong><p>00명</p></div>
        </div>
            <div class="card-actions">
                <a href="/posts/123/edit"       class="action-btn">수정</a>
                <a href="/posts/123/draft"      class="action-btn">삭제</a>
            </div>
        </div>
    </section>

    <a href="../8채용공고등록/채용공고등록.html" class="fab">
        <span class="material-icons">edit</span>
    </a>

  </div>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    // 전체 공고(.card) 개수 세기
    const count = document.querySelectorAll('.content .card').length;
    // .total 요소에 "전체 X건" 텍스트 삽입
    document.querySelector('.filter-bar .total')
      .textContent = `전체 ${count}건`;
  });

  document.addEventListener('DOMContentLoaded', () => {
  // 모든 탭을 순회
  document.querySelectorAll('.tabs .tab').forEach(async tab => {
    const href = tab.getAttribute('href');
    try {
      // 1) 해당 페이지 HTML 가져오기
      const res  = await fetch(href, { cache: 'no-cache' });
      const text = await res.text();
      // 2) 파싱해서 DOM 얻기
      const doc = new DOMParser().parseFromString(text, 'text/html');
      // 3) .content .card 개수 세기
      const cnt = doc.querySelectorAll('.content .card').length;
      // 4) 탭 안 .count 업데이트
      tab.querySelector('.count').textContent = cnt;
    } catch (e) {
      console.error(`Failed to load ${href}:`, e);
      tab.querySelector('.count').textContent = '0';
    }
  });

  // **현재 페이지**에서는 active 클래스도 붙여주기
  const path = location.pathname.split('/').pop();
  document.querySelectorAll('.tabs .tab').forEach(tab => {
    if (tab.getAttribute('href') === path) {
      tab.classList.add('active');
    }
  });
});


</script>

</body>
</html>
