<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>채용공고관리 – 마감</title>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>
  <link rel="stylesheet" href="채용공고관리.css"/>
</head>
<body>
  <div class="wrapper">
    <header>
    <a href="../6메인/Ywork.html" class="back-btn">
        <img src="../공통/img/뒤로가기.png" alt="back-btn"/>
    </a>
      <h1>공고관리</h1>
    </header>

  <nav class="tabs">
    <a href="채용공고관리등록.html" class="tab"> 
      등록(<span class="count">–</span>)
    </a>
    <a href="채용공고관리대기.html"  class="tab">
      대기(<span class="count">–</span>)
    </a>
    <a href="채용공고관리마감.html" class="tab active">
      마감(<span class="count">–</span>)
    </a>
  </nav>

    <div class="search-container">
      <input type="text" class="search-input" placeholder="공고제목, 기업명, 업직종 검색"/>
      <button class="search-btn"><span class="material-icons">search</span></button>
    </div>

    <div class="filter-bar">
      <span class="total"></span>
      <button class="sort-btn">
        <span class="material-icons">unfold_more</span>작성일순
      </button>
    </div>

    <section class="content">
      <div class="card">
        <div class="card-content">
          <div class="item-row"><strong>공고명</strong><p>OO슈퍼 마감된 공고</p></div>
          <div class="item-row"><strong>장소</strong><p>부산시 해운대구 우동 1234</p></div>
          <div class="item-row"><strong>업직종</strong><p>편의점, 판매</p></div>
          <div class="item-row"><strong>모집인원</strong><p>00명</p></div>
        </div>
        <div class="card-actions">
            <a href="/posts/123/edit"    class="action-btn">조회</a>
        </div>
      </div>
    </section>

    <a href="../8채용공고등록/채용공고등록.html" class="fab">
        <span class="material-icons">edit</span>
    </a>  

</div>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const count = document.querySelectorAll('.content .card').length;
    document.querySelector('.filter-bar .total')
      .textContent = `전체 ${count}건`;
  });

  document.addEventListener('DOMContentLoaded', () => {
  document.querySelectorAll('.tabs .tab').forEach(async tab => {
    const href = tab.getAttribute('href');
    try {
      const res  = await fetch(href, { cache: 'no-cache' });
      const text = await res.text();
      const doc = new DOMParser().parseFromString(text, 'text/html');
      const cnt = doc.querySelectorAll('.content .card').length;
      tab.querySelector('.count').textContent = cnt;
    } catch (e) {
      console.error(`Failed to load ${href}:`, e);
      tab.querySelector('.count').textContent = '0';
    }
  });

  const path = location.pathname.split('/').pop();
  document.querySelectorAll('.tabs .tab').forEach(tab => {
    if (tab.getAttribute('href') === path) {
      tab.classList.add('active');
    }
  });
});


</script>

</body>
</html>
